
# 🏠 Qt/OpenCV 스마트 CCTV (Home Protector)



## 📝 프로젝트 배경 (Project Background)

집을 비울 때 가장 걱정되는 일 1, 2위는 **택배 도난**과 **주택 침입**입니다. 실제로 주택 보안 솔루션에서 소비자들이 가장 원하는 제품 역시 **주택 앞을 감시하는 CCTV**로 나타났습니다.
이 프로젝트는 이러한 사회적 요구에 부응하여, 단순 녹화를 넘어 지능형 감지 및 알림 기능을 갖춘 실용적인 홈 시큐리티 시스템을 구현하는 것을 목표로 합니다.

## ✨ 주요 기능 (Key Features)

<img width="1434" height="801" alt="image" src="https://github.com/user-attachments/assets/1c480cfe-b815-475a-84ac-472ee7083927" />
<img width="1433" height="802" alt="image" src="https://github.com/user-attachments/assets/eac7682e-ac56-438b-b418-1fb344d1a2ff" />

  
* **실시간 움직임 감지**: 배경과 움직이는 객체를 분리하고, 설정된 크기 이상의 의미 있는 움직임만 포착합니다.
    * **워밍업**: 프로그램 시작 시 고정된 움직임을 학습하여 이후 감시에서 제외합니다.
* **지능형 녹화**:
    * **지속형 녹화**: 움직임이 사라진 후에도 **5초**의 유예 시간을 두어 중요한 순간을 놓치지 않고 모두 녹화합니다.
    * **안정적인 파일 저장**: 녹화 중 충돌로 인한 파일 손상을 막기 위해, 임시 파일(`.tmp`)에 먼저 기록한 후 완성된 파일만 최종적으로 저장합니다.
<img width="1433" height="803" alt="image" src="https://github.com/user-attachments/assets/e96b50c5-5fde-421b-ae16-62b0a4e81521" />

* **자동 영상 보정 (Auto-CLAHE)**:
    * 실시간으로 영상 밝기를 분석하여, 어두운 환경에서는 **CLAHE 필터**를 자동으로 활성화하고 강도를 조절하여 선명한 시야를 확보합니다.
<img width="1433" height="803" alt="image" src="https://github.com/user-attachments/assets/499cf55f-aac3-4d96-a7a0-5d3d2c2fa41f" />

* **스마트 알림 및 UI**:
    * **지속형 팝업**: 움직임이 감지되는 동안 **하나의 경고 팝업**만 유지하여 불필요한 알림 반복을 방지합니다.
    * **날짜별 갤러리**: 녹화된 영상들을 **날짜별로 자동 그룹화**하여 쉽게 찾아볼 수 있습니다.
    * **비동기 썸네일 로딩**: 갤러리를 열 때 프로그램이 멈추는 현상을 방지하기 위해, 썸네일을 **백그라운드에서 생성**하여 순차적으로 표시합니다.
* **원격 모니터링**:
    * **웹 스트리밍**: 처리된 최종 영상을 **같은 네트워크의 웹 브라우저**로 실시간 송출하여 원격으로 현장을 확인할 수 있습니다.

## 💡 문제 해결 (Troubleshooting)

* **문제점**: 조명이 약한 환경(야간, 역광)에서 감지 성능 저하
    * **해결책**: 실시간으로 영상 밝기를 분석하여 어두워지면 **CLAHE 필터**를 동적으로 적용, 이미지의 대비를 극대화하여 객체 식별률을 높였습니다.
* **문제점**: 프로그램 시작 시 바람에 흔들리는 나뭇가지 등 불필요한 움직임까지 감지
    * **해결책**: **워밍업** 시간을 두어, 초기 몇 초간 감지되는 움직임을 '고정된 배경 움직임'으로 학습하고 이후 감시에서는 무시하도록 하여 오탐지를 줄였습니다.

## 🛠️ 기술 스택 (Tech Stack)

* **언어**: C++
* **프레임워크**: Qt 6 (Widgets, Concurrent, WebSockets, Multimedia)
* **핵심 라이브러리**: OpenCV 4
* **빌드 시스템**: qmake
* **개발 환경**: Ubuntu (Linux), Qt Creator

## 📝 추후 개선 사항 (Future Improvements)

* **AI 객체 탐지**: YOLO와 같은 딥러닝 모델을 통합하여, 단순 움직임이 아닌 '사람', '차량' 등 특정 객체만 선별적으로 탐지하는 기능을 구현합니다.
* **사용자 편의 기능**: 위험이 감지되었을 때, 스마트폰 푸시 알림이나 이메일로 경고 메시지와 스크린샷을 전송하는 기능을 추가합니다.

## 시연 영상

https://github.com/user-attachments/assets/95df505f-5daa-40d6-afb8-a22f7ec5a571


